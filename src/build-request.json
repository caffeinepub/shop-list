{
  "kind": "build_request",
  "title": "Fix authentication flow - enable app access after sign-in",
  "projectName": "Interior Hub",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Fix the authentication flow so users can successfully sign in with Internet Identity and access the main application features (projects, rooms, shopping lists, tasks, etc.) instead of being stuck on the landing page that shows 'Interior Hub Professional project management for interior designers Sign in to manage your projects, clients, and shopping lists'",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-20"
        ],
        "quotes": [
          "after I open the app. I see only: \"Interior Hub Professional project management for interior designers Sign in to manage your projects, clients, and shopping lists\" but I can not open or run the app."
        ]
      },
      "acceptanceCriteria": [
        "After clicking sign in and completing Internet Identity authentication, user is redirected to the main app interface",
        "User can see and access the main navigation menu (Projects, Shopping Lists, Tasks, etc.)",
        "The landing/sign-in page is no longer displayed after successful authentication",
        "User profile data is properly loaded after authentication",
        "First-time users are prompted to complete profile setup before accessing main features"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Ensure the ProfileSetupModal appears automatically for new users who have not completed their profile, and blocks access to main features until profile setup is complete",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-20"
        ]
      },
      "acceptanceCriteria": [
        "ProfileSetupModal displays automatically after first-time Internet Identity sign-in",
        "Modal cannot be dismissed until user completes all required fields (name, email, role)",
        "After profile setup completion, user is redirected to the main application interface",
        "Returning users with completed profiles skip the setup modal entirely"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Verify that the Layout component and main application routes render correctly after authentication state changes from unauthenticated to authenticated",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-20"
        ]
      },
      "acceptanceCriteria": [
        "Layout component with header, navigation, and main content area renders after sign-in",
        "Route navigation works correctly (clicking menu items navigates to correct pages)",
        "User profile information displays in the header/navigation",
        "No console errors related to authentication or routing"
      ]
    }
  ],
  "constraints": [
    "Do not modify backend authentication logic or main.mo",
    "Do not change the Internet Identity integration hook (useInternetIdentity.ts)",
    "Maintain existing routing structure defined in App.tsx"
  ],
  "nonGoals": [
    "Adding new authentication methods beyond Internet Identity",
    "Redesigning the landing page or login UI",
    "Adding new user profile fields",
    "Modifying backend user profile storage schema"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}